# 開発進捗

## 2025-07-22

- ドキュメント・設計書類の整理と初期化
  - `仕様・設計書.md` を新規作成し、システム全体の仕様・設計内容をこれから記述開始
  - 「えきてん」市町村一覧スクレイピング仕様の策定準備
- えきてんサイトの「市町村から探す」ページ構造調査とスクレイピング仕様案の作成
- 進捗記録の運用方針を決定（今後は都度このファイルに記録）

---

## 2025-07-22（続き）

- GitHub連携準備として、`github` フォルダを新規作成
- 開発用プログラム `ekiten_scraper.py` を `github` フォルダに移動

### ---

2025-07-22 21:31
- 新しいWINDSURFバージョンへのアップデートに伴い、一度再起動予定。
- ここまでの進捗・ファイル構成・運用ルールはすべて記録済み。
- 再起動後も直ちに作業・記録を継続できる状態です。

---

## 2025-07-22（追加進捗）

- 市町村一覧スクレイピングをHTMLパースからAPI利用方式に刷新し、安定したcity_code付きデータ取得に成功
- `ekiten_api_scraper.py`：APIから都道府県→市町村リストを取得、city_codeを含めてJSON出力
- Supabaseの`cities`テーブルへcity_code付きで投入するスクリプト（`supabase_insert.py`）を整備
    - テーブル設計も`city_code`カラム追加・unique制約で将来拡張性を確保
    - Supabase側のスキーマキャッシュ問題によりAPI反映遅延→Restart APIで解決
- ジャンル（カテゴリ）抽出着手：
    - 公式ジャンル一覧ページ（`/genre/`）が404のため、APIや画面遷移から正しい取得方法を調査中
    - ブラウザ開発者ツールで`large-genres`等のAPIレスポンスも確認済み、今後スクリプト化予定
- 現在の未解決・課題：
    - ジャンル一覧の安定取得方法確定
    - カテゴリデータのSupabase投入設計
    - 進捗・仕様書の随時反映

※今後も進捗や作業内容が発生するたびに、このファイルに都度追記していきます。

---

## 2025-07-22（再開・ToDoメモ）

- カテゴリ（ジャンル）データのAPI取得・Supabase投入スクリプト作成を継続
    - `categories`テーブル（DDL済み）にAPI取得した全ジャンル（大・小）を投入する
    - 投入用スクリプト作成・動作確認
- cities, categoriesテーブル設計は現状維持、今後の拡張性も担保
- shops等のリレーション設計は将来要件に応じて追加・仕様書に記載予定
- 仕様・設計書.mdにも現状のテーブル設計・API仕様・今後の拡張方針を反映

明日以降はここから再開してください。
